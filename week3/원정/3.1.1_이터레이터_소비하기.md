# 3.1.1 이터레이터 소비하기

ES6에서 정의한 iteration 프로토콜을 사용하면 데이터를 한 조각씩 순차적으로 처리한다. next() 호출 반환값인 iterator result 객체의 done 프로퍼티가 true라면 반복 작업이 중단된다. 하지만 이 방법은 다소 번거롭기 때문에 ES6에서는 for..of 반복문 같은 새로운 문법과 API를 새롭게 정의해 표준화된 방법으로 iterator result 객체를 소비할 수 있도록 제공한다.

``` js
// 처리하려는 데이터의 이터레이터
var it  = /* ... */;

for (let val of it) {
    console.log(`이터레이터 값: ${ val }`);
}
```

``` js
// while 루프로 이터레이터를 소비하는 예제
var it = /* ... */;
while (true) {
    var res = it.next();
    if (res.done) break;
    console.log(`이터레이터 값: ${ val }`);
}
```

for...of 반복문 말고도 표현식 ...을 사용하면 이터레이터를 사용할 수 있다. ...은 대칭 형태인 전개 구문과 나머지 매개변수를 이용해 사용한다. 이때 전개 구문이 바로 이터레이터를 소비하는 주체인 이터레이터 소비자이다.

이터레이터를 펼치려면 펼칠 무언가가 있어야 한다. JS에서는 배열이나 함수 호출시 넘기는 인수를 다룰 때 이런 시나리오가 가능하다.

배열에 구문을 적용한 예시이다.
``` js
// 이터레이터를 펼친 결과가 배열의 각 요소가 되도록 한다.
var vals = [ ...it ];
```

함수 호출시 나머지 매개변수를 사용하면 다음과 같다.
``` js
// 이터레이터를 펼친 결과를 함수 호출문에 넘겨 각 값을 인수로 사용한다.
doSomethingUseful( ...it );
```

전개 구문과 나머지 매개변수에서 사용되는 표현식 ...은 for..of 반복문과 마찬가지로 이터레이터 소비 프로토콜을 준수한다. 그 결과로 이터레이터에서 원하는 값을 추출해 배열이나 인수 목록 같이 원하는 곳에 값을 할당할 수 있다.