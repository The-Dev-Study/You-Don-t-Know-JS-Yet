# 2.1 파일은 프로그램입니다.
거의 모든 웹사이트나 웹 애플리케이션은 확장자가 .js인 수많은 JS 파일로 이루어져 있다. 이 때문에 웹사이트 하나 혹은 애플리케이션 하나를 프로그램 하나라고 생각하기 쉽지만, JS는 그렇게 작동하지 않는다.

JS에서는 파일 각각이 별도의 프로그램이다.

파일 각각을 프로그램으로 봐야 하는 게 중요한 이유는 주로 오류 처리와 관련이 있다. JS는 파일을 프로그램으로 취급하기 때문에 파일 하나에만 오류가 있어도 다음 파일이 처리되지 않을 수 있다. .js 파일 다섯 개로 구성된 애플리케이션이 있는데, 그 중 하나에 이상이 있다면 전체 애플리케이션은 기껏해야 부분적으로만 작동한다.

애플리케이션을 구성하는 파일 각각을 별개의 프로그램으로 봐야 한다는 필자의 이야기가 조금 생소할 수 있다. 애플리케이션을 이용하는 사용자 관점에서는 커다란 프로그램 하나를 이용하고 있는 것 처럼 느껴지기 때문이다.

> 상당수의 웹 프로젝트는 빌드 도구를 써서 분리된 파일을 하나로 합친 후 배포를 진행한다. 이 경우 JS는 합쳐진 단일 파일을 전체 프로그램으로 취급한다.

독립적인 .js 파일 여러 개를 하나의 프로그램으로서 작동시키는 유일한 방법은 전역 스코프를 사용해 파일 간 상태를 공유하고, 공통으로 사용하는 기능을 접근할 수 있도록 만드는 방법뿐이다. 이렇게 전역 스코프 네임스페이스에서 여러 .js 파일이 조합되면 이 파일들은 런타임에서 하나의 애플리케이션으로서 작동한다.

ES6 이후로 JS는 보통의 독립형 JS 프로그램 포맷 외에 모듈 포맷도 지원하는데, 모듈도 파일 기반이다. 파일을 import 문이나 ``` <script type=module> ```태그를 통해 읽는 경우 해당 파일은 하나의 모듈로서 처리된다.

모듈을 하나의 독립적이고 실행 가능한 프로그램이라고 생각지않는 개발자가 있을 수 있다. 하지만 JS는 각 모듈을 별도로 처리한다. 런타임에 독립된 JS 파일 여러 개를 전역 스코프에서 조합해 처리하는 것처럼 한 모듈에서 다른 모듈을 불러오면 런타임에서 두 모듈이 상호작용할 수 있다.

단일 파일이든 모듈이든, 어떤 코드 구성 패턴과 로딩 메커니즘을 사용하든 관계없이 파일 하나를 제 3의 작고 독립적인 프로그램과 협력해 프로그램 전체를 작동시키는 고유한 작은 프로그램이라고 생각해야 한다.