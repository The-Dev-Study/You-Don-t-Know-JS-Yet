# 1.5.2 간극을 매우기 위한 방법 찾기

상위 호환성 문제가 근래 추가되었지만 아직 지원하지 않는 API 메서드 때문에 발생한 경우  
-> 오래된 환경에도 있었던 것처럼 해주는 방법

### 폴리필(일명 심 shim)

```
// 원격으로 가져온 데이터를 담은 프로미스 반환
var pr = getSomeRecords();

// 데이터를 가져오는 동안 화면에 스피너 노출
startSpinner();

pr
.then(renderRecords) // 가져온 데이터 화면에 표시
.catch(showError) // 데이터를 가져오는데 실패할 경우 오류 노출
.finally(hideSpinner) // 스피너 가리기

```

finally는 2019에 프로미스 프로토타입에 추가됨  
따라서 ES2019 미지원 환경에서는 오류가 발생함

도와줘요 폴리필~~!!!

```
if (!Promise.prototype.finally) {
    Promise.prototype.finally = function f(fn){
        return this.then(
            function t(v){
                return Promise.resolve( fn() )
                .then(function t(){ return v;
                });
            },
            function c(e){
                return Promise.resolve( fn() )
                .then(function t(){
                    throw e;
                });
            }
        );
    };
};
```

바벨과 같은 트랜스파일러가 폴리필이 필요한 코드를 찾아 자동으로 폴리필을 추가함  
종종 개발자가 명시적으로 추가해야 할 경우도 있지만 앞선 예시와 유사한 형태로 작성하면 됨

** 트랜스파일이나 폴리필은 오래된 환경이나 애플리케이션, JS 최신 기능 이 둘 사이 간극을 메꾸는 가교 역할을 수행 **
