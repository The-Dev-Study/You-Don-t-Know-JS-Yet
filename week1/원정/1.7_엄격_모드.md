# 1.7 엄격 모드

ES5에 새로운 매커니즘인 엄격 모드(strict mode)가 추가되고 선택 사항으로 엄격 모드를 사용할 수 있게 되면서 더 나은 JS 프로그램을 만들기 위한 장치가 마련되었다.

엄격 모드를 사용하면 이득이 더 크다. 하지만 레거시라 부르는 기존 코드에 기반한 관성은 정말 바꾸기 어렵다. 이런 이유로 엄격 모드가 등장한 지 10년이 지났지만 애석하게도 엄격 모드는 기본이 아닌 선택 사항이다.

엄격 모드는 '할 수 없는 것에 제약을 두는 모드'가 아니다. 엄격 모드는 JS 엔진이 코드를 최적화하고 효율적으로 실행할 수 있게 해주는 최고의 '안내 가이드 역할을 하는 모드'이다. JS 코드 대부분은 여러 팀에 속한 다양한 개발자에 의해 작성된다. 이런 상황에서 linter와 같은 도구를 사용해 엄격 모드로 작업한다면 엄격 모드의 엄격함 덕분에 비엄격 모드에서 발생할 수 있는 실수와 문제를 미연에 방지할 수 있어 협업이 수월해진다.

엄격 모드에서만 활성화되는 가이드 대부분은 초기 오류의 형태를 띠는데, 초기 오류는 엄밀히 말해 구문 오류는 아니지만 코드 실행 전 컴파일 단계에서 잡아낼 수 있는 오류를 의미한다. 함수에 동일한 이름을 가진 매개변수가 있다면 엄격 모드에서는 오류가 발생하며 이게 바로 초기 오류의 대표적인 예이다. 이외에 엄격 모드에서만 활성화 되는 가이드 몇가지는 런타임에서만 발견할 수 있다. 예를 들면 런타임에 this의 값을 찾을 수 없는 경우, this에 글로벌 객체 대신 undefined를 할당하는 가이드가 있다.

파일 대상으로 적용되는 엄격 모드는 전처리 구문 "use strict"; 가 있는 경우에 활성화된다.

한편, 엄격 모드는 함수 단위로도 적용할 수 있다.
``` js
function someOperations() {
    // 공백이나 주석만 이곳에 올 수 있다.
    "use strict";
    // 나머지 코드는 이제 엄격 모드로 작동한다.
}
```

흥미롭게도 파일 단위 엄격 모드가 적용되면 함수에는 엄격 모드를 사용할 수 없다. 그렇기 때문에 파일에만 엄격 모드를 적용하거나, 함수에만 엄격 모드를 적용해야 한다. 함수 단위 엄격 모드는 비엄격 모드에서 작성했던 기존 프로그램에 점진적으로 엄격 모드를 적용해야 할 때만 사용하는 게 좋다.

엄격 모드가 기본이 아니어서 발생할 수 있는 '불확실성'을 줄여주는 여러 요인이 있다.

첫 번째는 원본 코드가 비엄격 모드에서 작성되었다 하더라도 사실상 트랜스파일 처리된 코드는 엄격 모드를 준수한다는 점이다. 상용 환경에 배포하는 JS 코드 배부분은 트랜스파일 처리된다. 그렇기 때문에 상용 환경의 JS 코드 대부분은 이미 엄격 모드를 준수한다고 가정할 수 있다.

여기에 더해 요즘에는 JS 코드를 작성할 때 ES6 모듈 형식으로 작성하는 경우가 많고, 이런 현상이 더욱 심화되고 있다는 사실 때문에 불확실성이 점차 줄어들고 있다. 왜냐면 ES6 모듈은 기본이 엄격 모드이기 때문에 ES6 모듈 형식으로 만든 파일은 자동으로 엄격 모드를 준수하기 떄문이다. 기술적으로는 엄격모드가 기본이 아니지만. 엄격 모드는 사실상의 기본으로 자리 잡았다.