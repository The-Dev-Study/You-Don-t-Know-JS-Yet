# 1.5.1 간극을 줄이기 위한 노력
JS는 상위 호환성을 보장하지 않기에 아주 오래된 엔진에선ㄴ 유효한 문법으로 작성한 코드가 돌아가지 않을 가능성이 있다. ES2019에서 추가된 기능을 사용해 작성한 프로그램을 2016년 엔진에서 실행하면 프로그램이 실행되지 않는 걸 아주 높은 확률로 볼 수 있다.


ES2019에 추가된 기능이 신규 문법이라면 프로그램은 컴파일과 실행에 완전히 실패하고 구문오류가 발생한다. 

그렇다면 개발자인 우리는 옛날 문법만 쓰면서 JS가 발전하는 속도를 따라가지 못하는 걸까? 절대 아니다.

방법은 있다. 다만 JS로 개발할 때는 이런 간극을 줄이기 위한 각고의 노력이 필요하다 명세서에 새롭게 추가되었지만 구 엔진과 호환되지 않는 문법은 트랜스파일을 통해 호환성 문제를 해결할 수 있다. 이때 변환 후 산출물은 소스코드이다. 상위 호환성으로 인해 발생하는 문제 대부분은 트랜스파일러를 사용하면 해결된다. 트랜스파일러는 새로운 JS 문법을 오래된 문법으로 바꿔주며 주로 바벨을 사용한다.

트랜스파일러가 어떻게 작동하는지 예시를 살펴보자. 먼저 비교적 최근 추가된 문법을 사용해 작성한 코드이다.

``` js
if (something) {
    let x = 3;
    console.log(x);
} else {
    let x = 4;
    console.log(x);
}
```
다음은 앞선 코드를 바벨이 트랜스파일한 결과이다. 프로덕션 환경에 배포할 때는 이처럼 트랜스파일러를 거친 산출물을 배포한다.

``` js
var x$0, x$1;
if (something) {
    x$0 = 3;
    console.log(x$0);
} else {
    x$1 = 4;
    console.log(x$1);
}
```
트랜스파일 전 원래 코드에서는 if와 else 절에 각각 변수 x를 정의했다. let으로 정의한 변수는 변수의 유효 범위가 블록 수준으로 한정되기 때문에 부 변수는 서로 간섭받지 않는다. 

이쯤되면 옛날 문법을 쓰면 될걸 트랜스파일러를 쓰면서까지 최신 문법으로 코드를 작성해야 하는지 의문이 들 수 있다. 변수를 기존처럼 var로 선언하면 되지 굳이 let을 쓸 필요가 있냐는거다. 최신 JS를 쓰는 게 좋다고 강하게 곤유하는 이유는 코드가 깔끔해지고 의도하는 바를 효과적으로 전달할 수 있기 때문이다.